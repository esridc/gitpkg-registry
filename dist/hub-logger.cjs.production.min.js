"use strict";function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("winston");function r(t){void 0===t&&(t="");var e=/(.+?\.js):(\d+):\d+/;return(t.split("\n").find((function(t){return e.test(t)}))||"").trim()}function n(e,r,n,i){return void 0===i&&(i={}),Object.entries(t({level:e,timestamp:r.toISOString(),status:n},i)).map((function(t){return t[0]+"="+JSON.stringify(t[1])})).join(" ")}exports.HubLogger=function(){function t(t){var r;void 0===t&&(t={}),this.sizeLimit=this.getSizeLimit(t.sizeLimit),this.globalLabels=null!=(r=t.labels)?r:{};var n=new e.transports.Console({level:t.level||"info",format:e.format.printf((function(t){return t.message})),handleExceptions:!0,handleRejections:!0});this.winstonLogger=e.createLogger({transports:[n]})}var i=t.prototype;return i.log=function(t,e,r){var i=new Date,o=n(t,i,e,Object.assign({},this.globalLabels,r));o.length>this.sizeLimit&&(this.warn("oversize-log-truncated",{timestamp:i.toISOString()}),o=("TOO LONG TRUNCATED "+o.slice(0,this.sizeLimit)).trim()),this.winstonLogger[t](o)},i.getSizeLimit=function(t){var e;return(t=null!=(e=t)?e:2e5)<100?100:t>2e5?2e5:t},i.info=function(t,e){this.log("info",t,e)},i.debug=function(t,e){this.log("debug",t,e)},i.warn=function(t,e){this.log("warn",t,e)},i.error=function(t,e){var n;e instanceof Error?(n={errorName:e.name,errorMessage:e.message},e.stack&&(n.source=r(e.stack))):n=e,this.log("error",t,n)},t}(),exports.formatLog=n,exports.getErrorSource=r;
//# sourceMappingURL=hub-logger.cjs.production.min.js.map
